/**
 * Copyright 2019 Penn State University
 * @license Apache-2.0, see License.md for full text.
 */
import{LitElement as t,html as e,css as i}from"../../../lit-element/lit-element.js";import{RichTextEditorPromptButtonBehaviors as o}from"../../rich-text-editor/lib/buttons/rich-text-editor-prompt-button.js";import"../../hax-iconset/lib/simple-hax-iconset.js";class HaxTextEditorButton extends(o(t)){static get tag(){return"hax-text-editor-button"}static get properties(){return{...super.properties,element:{type:Object}}}constructor(){super(),this.tag=HaxTextEditorButton.tag,this.toggles=!0,this.value={},this.command="insertHTML"}updated(t){super.updated(t),t.forEach(((t,e)=>{"element"===e&&this.element&&this.updateElement()}))}updateElement(){let t=this.element||{},e=t.settings||{},i=t.gizmo||{};this.fields=[...super.fields,...(e.configure||[]).map((t=>("code-editor"===t.inputMethod&&(t.inputMethod="textfield"),t))).filter((t=>""!==t.slot))],this.tagsList=i.tag||"span",this.icon=i.icon||"add",this.label=i.title||`Add ${i.tag}`,this.updateButton()}get promptCommandVal(){return this.value}getValue(t){let e=t||this.rangeElement(),i=super.getValue();return e&&this.fields.forEach((t=>{if(t.property&&"innerHTML"!==t.property&&(i[t.property]=e[t.property]),t.slot&&""!==t.slot){let o=e.querySelector(`[slot=${t.slot}]`);i[t.slot]=o?o.innerHTML:void 0}})),e?i:void 0}setToggled(){this.toggled=!!this.value}sendCommand(t=this.operationCommand,e=this.operationCommandVal,i=this.range){let o=document.createElement(this.tagsList);this.fields.forEach((t=>{if(t.property&&(o[t.property]=this.value[t.property]),o.innerHTML=this.value.innerHTML,t.slot&&""!==t.slot){let e=document.createElement("div");e.slot=t.slot,e.innerHTML=this.value[t.slot],o.append(e)}})),this.selectedNode?this.selectedNode.remove():super.sendCommand(t,"",i),i.insertNode(o)}}window.customElements.define(HaxTextEditorButton.tag,HaxTextEditorButton);export{HaxTextEditorButton};