import{LitElement as e,html as t,css as i}from"../../../lit-element/lit-element.js";import"../../simple-toolbar/lib/simple-button-grid.js";import{HaxComponentStyles as s}from"./hax-ui-styles.js";import{HAXStore as o}from"./hax-store.js";class HaxPicker extends e{static get styles(){return[...s,i`
        simple-button-grid {
          overflow-y: auto;
          margin: var(--hax-ui-spacing-sm);
          --simple-button-grid-cols: 100px;
        }
      `]}constructor(){super(),this._elements=[],this.selectionList=[],this.pickerType="gizmo"}render(){return t`
      <simple-button-grid cols="100px">
        ${this.selectionList.map(((e,i)=>t`
            <hax-tray-button
              show-text-label
              id="picker-item-${i}"
              @click="${this._selected}"
              data-selected="${i}"
              ?disabled="${o.activeGizmo&&o.activeGizmo.tag==e.tag}"
              label="${e.title}"
              icon="${e.icon}"
              icon-position="top"
            ></hax-tray-button>
          `))}
      </simple-button-grid>
    `}static get tag(){return"hax-picker"}static get properties(){return{_elements:{type:Array},selectionList:{type:Array},pickerType:{type:String,attribute:"picker-type"}}}buildOptions(e,t="element",i="Select an option",s="gizmo"){this.pickerType=s;var o=[];switch(s){case"gizmo":for(var a in e)e[a].__type=t,o.push({icon:e[a].gizmo.icon,title:e[a].gizmo.title,color:e[a].gizmo.color,tag:e[a].gizmo.tag});break;case"app":for(var a in e)o.push({icon:e[a].details.icon,title:e[a].details.title,color:e[a].details.color,tag:e[a].gizmo.tag});break;default:o=e}this._elements=e,this.selectionList=[...o],setTimeout((()=>{this.shadowRoot.querySelector("#picker-item-0").focus()}),50)}_selected(e){let t=e.target.getAttribute("data-selected");e.preventDefault(),e.stopPropagation(),void 0!==this._elements[t]&&("gizmo"==this.pickerType?(this._elements[t].replace=!0,this.dispatchEvent(new CustomEvent("hax-insert-content",{bubbles:!0,cancelable:!0,composed:!0,detail:this._elements[t]}))):this.dispatchEvent(new CustomEvent("hax-app-picker-selection",{bubbles:!0,cancelable:!0,composed:!0,detail:this._elements[t]}))),this.close()}close(){window.dispatchEvent(new CustomEvent("simple-modal-hide",{bubbles:!0,cancelable:!0,detail:{}}))}}window.customElements.define(HaxPicker.tag,HaxPicker);export{HaxPicker};