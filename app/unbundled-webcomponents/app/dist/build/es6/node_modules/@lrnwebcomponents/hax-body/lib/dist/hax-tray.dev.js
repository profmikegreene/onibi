Object.defineProperty(exports,"__esModule",{value:!0}),exports.HaxTray=void 0;var e=require("lit-element/lit-element.js"),t=require("@lrnwebcomponents/utils/utils.js"),n=require("@lrnwebcomponents/hax-body-behaviors/lib/HAXFields.js"),a=require("@lrnwebcomponents/simple-popover/lib/SimpleTourFinder"),i=require("./hax-store.js"),o=require("mobx"),r=require("@lrnwebcomponents/hax-body/lib/hax-ui-styles.js");require("@lrnwebcomponents/simple-fields/simple-fields.js"),require("@lrnwebcomponents/simple-icon/lib/simple-icons.js"),require("@lrnwebcomponents/hax-iconset/lib/simple-hax-iconset.js"),require("./hax-tray-upload.js"),require("./hax-gizmo-browser.js"),require("./hax-app-browser.js"),require("./hax-stax-browser.js"),require("./hax-map.js"),require("./hax-preferences-dialog.js");var s=require("@lrnwebcomponents/i18n-manager/lib/I18NMixin.js");require("@lrnwebcomponents/undo-manager/undo-manager.js");function _templateObject16_ba6fbc00af6311ebbe560fe9c4727db1(){var e=_taggedTemplateLiteral(['\n        :host {\n          z-index: 1000;\n          position: fixed;\n          top: 0;\n          font-family: var(--hax-ui-font-family);\n          font-size: var(--hax-ui-font-size);\n          color: var(--hax-ui-color);\n          transition: 0s color linear 0s;\n        }\n        :host([edit-mode][element-align="custom"]) {\n          left: var(--hax-tray-custom-x);\n          left: clamp(\n            0px,\n            var(--hax-tray-custom-x),\n            calc(100vw - var(--hax-tray-width, 300px))\n          );\n        }\n        :host([element-align="left"]) {\n          left: 0;\n        }\n        :host([element-align="right"]) {\n          right: 0;\n        }\n        :host(:focus-within),\n        :host(:hover) {\n          z-index: var(--hax-ui-focus-z-index);\n        }\n        .wrapper {\n          display: flex;\n          align-items: stretch;\n          flex-direction: row-reverse;\n          opacity: 0;\n          visibility: visible;\n          pointer-events: none;\n          width: var(--hax-tray-width, 300px);\n          overflow-x: hidden;\n          overflow-y: auto;\n          background-color: var(--hax-ui-background-color);\n          transition: 0.2s width ease-in-out 0s, 0.5s left ease-in-out 0.3s,\n            0.5s right ease-in-out 0.3s, 0s background-color linear,\n            0s border linear;\n          height: 100vh;\n        }\n        :host([collapsed]) .wrapper {\n          overflow-x: visible;\n        }\n        :host([element-align="left"]) .wrapper,\n        :host([element-align="custom"]) .wrapper {\n          left: -1000px;\n          flex-direction: row;\n        }\n        :host([element-align="right"]) .wrapper {\n          right: -1000px;\n        }\n        :host([edit-mode][element-align="left"]) .wrapper,\n        :host([edit-mode][element-align="custom"]) .wrapper {\n          left: 0;\n        }\n        :host([edit-mode][element-align="right"]) .wrapper {\n          right: 0;\n        }\n        :host([edit-mode]) .wrapper {\n          opacity: 1;\n          visibility: visible;\n          pointer-events: all;\n        }\n        #menubar {\n          display: inline-flex;\n          flex-direction: column;\n          align-items: stretch;\n          width: var(--hax-tray-menubar-min-width, 44px);\n          overflow: visible;\n          flex: 0 0 auto;\n          /*transition:0.3s width ease-in-out 0s;*/\n          z-index: 6;\n        }\n        :host([collapsed]) #menubar {\n          width: unset;\n        }\n        #menubar > * {\n          background-color: var(--hax-ui-background-color);\n        }\n        #menubar > *::part(button) {\n          padding: 2px;\n        }\n        #menubar > *::part(label) {\n          opacity: 0;\n          margin: 0px;\n          width: 0%;\n          font-size: 10px;\n          padding: 0px;\n          visibility: hidden;\n          overflow: hidden;\n          display: inline-block;\n          text-align: left;\n          transition: 0.2s width ease-in-out 0s, 0.2s margin ease-in-out 0s,\n            0.2s padding ease-in-out 0s, 0s opacity linear 0.2s,\n            0s visibility linear 0.2s;\n        }\n        :host([collapsed]) #menubar > *::part(label) {\n          opacity: 1;\n          width: 100%;\n          visibility: visible;\n          overflow: unset;\n          transition: 0.2s width ease-in-out 0s, 0.2s margin ease-in-out 0s,\n            0.2s padding ease-in-out 0s, 0s opacity linear 0s,\n            0s visibility linear 0s, 0s overflow linear 0.2s;\n        }\n        loading-indicator {\n          --loading-indicator-background-color: var(\n            --simple-colors-default-theme-accent-2,\n            grey\n          );\n          --loading-indicator-color: var(\n            --simple-colors-default-theme-accent-10,\n            black\n          );\n        }\n        .detail {\n          flex: 1 1 auto;\n          opacity: 1;\n          visibility: visible;\n          pointer-events: all;\n          transition: 0s opacity ease-in-out 0, 0s visibility ease-in-out 0s,\n            0s border linear;\n          border: 1px solid var(--hax-ui-border-color);\n        }\n        :host([collapsed]) .detail {\n          width: 0px;\n          overflow: hidden;\n          opacity: 0;\n          visibility: hidden;\n          pointer-events: none;\n          max-height: 100vh;\n          overflow-y: auto;\n          transition: 0s opacity ease-in-out 0.7s,\n            0s visibility ease-in-out 0.7s;\n        }\n        #tray-detail {\n          position: absolute;\n          top: 0;\n          left: 0;\n          width: calc(\n            var(--hax-tray-width) - var(--hax-tray-menubar-min-width, 44px) - 2 *\n              var(--hax-ui-spacing)\n          );\n          padding: 0 var(--hax-ui-spacing) var(--hax-ui-spacing);\n          height: 100vh;\n          overflow-y: auto;\n        }\n        :host([element-align="left"]) #tray-detail,\n        :host([element-align="custom"]) #tray-detail {\n          left: unset;\n          right: 0;\n        }\n        :host([edit-mode]:not([collapsed])) #tray-detail {\n          display: block;\n        }\n        #haxcancelbutton::part(dropdown-icon) {\n          display: none;\n        }\n        .tray-detail-titlebar {\n          background-color: var(--hax-ui-color-accent);\n          padding: var(--hax-ui-spacing-sm) var(--hax-ui-spacing);\n          margin: 0 calc(0px - var(--hax-ui-spacing)) var(--hax-ui-spacing);\n          display: flex;\n          align-items: center;\n          justify-content: space-between;\n          height: var(--simple-modal-titlebar-height, unset);\n          line-height: var(--simple-modal-titlebar-line-height, unset);\n          position: sticky;\n          z-index: 2;\n          top: 0;\n        }\n        .tray-detail-titlebar h4 {\n          flex: 1 1 auto;\n          font-size: var(--hax-ui-font-size);\n          font-family: var(--hax-ui-font-family);\n        }\n        #toggle-tray-size {\n          flex: 0 0 auto;\n        }\n        hax-tray-button,\n        hax-app-browser,\n        hax-gizmo-browser {\n          transition: 0.2s all ease-in-out;\n          transition: 0s color linear !important;\n          transition: 0s background-color linear !important;\n          transition: 0s border-color linear !important;\n          visibility: visible;\n        }\n        hax-tray-button:not(:defined),\n        hax-app-browser:not(:defined),\n        hax-gizmo-browser:not(:defined) {\n          visibility: hidden;\n        }\n        hax-tray-upload {\n          flex: 0 0 auto;\n        }\n        *[hidden] {\n          display: none;\n        }\n        :host([element-align="right"]) #button {\n          right: 0;\n        }\n        :host([element-align="left"]) #button {\n          left: 0;\n        }\n\n        #button {\n          position: fixed;\n          top: 0;\n          visibility: visible;\n          margin: var(--hax-ui-spacing-xs);\n        }\n        :host([edit-mode]) #button {\n          visibility: hidden;\n          opacity: 0;\n        }\n        #button:hover {\n          opacity: 1;\n        }\n        /** This is mobile layout for controls */\n        @media screen and (max-width: 800px) {\n          :host {\n            --hax-tray-width: 100%;\n            --hax-tray-menubar-min-width: 32px;\n            width: 100%;\n          }\n          .wrapper {\n            width: 100%;\n            overflow-x: hidden;\n            overflow-y: hidden;\n            flex-direction: column;\n            align-items: stretch;\n            height: 100vh;\n            max-height: 100vh;\n            transition: background-color linear, 0s border linear;\n          }\n          :host([collapsed]) .wrapper {\n            height: auto;\n          }\n          #menubar {\n            position: sticky;\n            flex-direction: row;\n            left: 0;\n            top: 0;\n            height: auto;\n            flex: 0 0 auto;\n            width: 100%;\n          }\n          #menubar > * {\n            flex: 1 0 auto;\n            min-width: var(--hax-tray-menubar-min-width, 32px);\n          }\n          #menubar > *::part(button) {\n            min-width: var(--hax-tray-menubar-min-width, 32px);\n            justify-content: space-around;\n          }\n          #menubar > *::part(label) {\n            display: none;\n          }\n          .detail {\n            width: 100%;\n            position: relative;\n            flex: 1 1 100%;\n          }\n          :host([collapsed]) .detail {\n            flex: 0 0 0px;\n          }\n          #tray-detail {\n            top: 0;\n            width: 100%;\n          }\n        }\n        @media screen and (max-width: 600px) {\n          :host([edit-mode]) .hide-small {\n            display: none;\n          }\n        }\n      ']);return _templateObject16_ba6fbc00af6311ebbe560fe9c4727db1=function _templateObject16_ba6fbc00af6311ebbe560fe9c4727db1(){return e},e}function _templateObject15_ba6fbc00af6311ebbe560fe9c4727db1(){var e=_taggedTemplateLiteral([' <hax-tray-upload ?hidden="','"></hax-tray-upload>\n      <h5 ?hidden="','">','</h5>\n      <hax-app-browser id="appbrowser" ?hidden="','"></hax-app-browser>']);return _templateObject15_ba6fbc00af6311ebbe560fe9c4727db1=function _templateObject15_ba6fbc00af6311ebbe560fe9c4727db1(){return e},e}function _templateObject14_ba6fbc00af6311ebbe560fe9c4727db1(){var e=_taggedTemplateLiteral(['<hax-map\n      controls="content-map"\n      ?hidden="','"\n    ></hax-map>']);return _templateObject14_ba6fbc00af6311ebbe560fe9c4727db1=function _templateObject14_ba6fbc00af6311ebbe560fe9c4727db1(){return e},e}function _templateObject13_ba6fbc00af6311ebbe560fe9c4727db1(){var e=_taggedTemplateLiteral([' <hax-gizmo-browser\n        id="gizmobrowser"\n        ?hidden="','"\n      ></hax-gizmo-browser>\n      <h5 ?hidden="','">','</h5>\n      <hax-stax-browser\n        id="staxbrowser"\n        ?hidden="','"\n      ></hax-stax-browser>']);return _templateObject13_ba6fbc00af6311ebbe560fe9c4727db1=function _templateObject13_ba6fbc00af6311ebbe560fe9c4727db1(){return e},e}function _templateObject12_ba6fbc00af6311ebbe560fe9c4727db1(){var e=_taggedTemplateLiteral([' <simple-fields\n      id="settingsform"\n      disable-responsive\n      code-theme="','"\n      ?hidden="','"\n    ></simple-fields>']);return _templateObject12_ba6fbc00af6311ebbe560fe9c4727db1=function _templateObject12_ba6fbc00af6311ebbe560fe9c4727db1(){return e},e}function _templateObject11_ba6fbc00af6311ebbe560fe9c4727db1(){var e=_taggedTemplateLiteral([' <hax-preferences-dialog\n      id="advanced-settings"\n      ?hidden="','"\n    ></hax-preferences-dialog>']);return _templateObject11_ba6fbc00af6311ebbe560fe9c4727db1=function _templateObject11_ba6fbc00af6311ebbe560fe9c4727db1(){return e},e}function _templateObject10_ba6fbc00af6311ebbe560fe9c4727db1(){var e=_taggedTemplateLiteral([' <div\n      id="tray-detail"\n      aria-live="polite"\n      aria-disabled="','"\n      tabindex="','"\n      selected-detail="','"\n    >\n      <div class="tray-detail-titlebar">\n        <h4>\n          ','\n        </h4>\n        <hax-tray-button\n          voice-command="collapse menu"\n          id="toggle-tray-size"\n          event-name="toggle-tray-size"\n          icon="close"\n          label="Close"\n        >\n        </hax-tray-button>\n      </div>\n      '," ","\n      "," ","\n      ","\n    </div>"]);return _templateObject10_ba6fbc00af6311ebbe560fe9c4727db1=function _templateObject10_ba6fbc00af6311ebbe560fe9c4727db1(){return e},e}function _templateObject9_ba6fbc00af6311ebbe560fe9c4727db1(){var e=_taggedTemplateLiteral(['<hax-tray-button\n        id="exportbtn"\n        icon="code"\n        label="','"\n        voice-command="view (page) source"\n        data-simple-tour-stop\n        data-stop-title="label"\n        icon-position="left"\n        show-text-label\n        show-tooltip\n        align-horizontal="','"\n      >\n        <div data-stop-content>\n          Every change you make in HAX is ultimately writing HTML. Know HTML?\n          Awesome, pop open the source view and make any changes you like. HTML\n          is always behind the scenes ensuring that content is portable, well\n          formatted and easy to read.\n        </div>\n      </hax-tray-button>\n      <hax-tray-button\n        ?hidden="','"\n        id="advanced-settings"\n        event-name="advanced-settings"\n        icon="settings"\n        label="','"\n        voice-command="select settings (menu)"\n        data-simple-tour-stop\n        data-stop-title="label"\n        controls="tray-detail"\n        toggles\n        ?toggled="','"\n        icon-position="left"\n        show-text-label\n        show-tooltip\n        align-horizontal="','"\n      >\n        <div data-stop-content>\n          Some advanced options for developers and experimental purposes.\n        </div>\n      </hax-tray-button>\n      <hax-tray-button\n        event-name="','"\n        icon="help"\n        label="','"\n        voice-command="start tour"\n        toggles\n        ?toggled="','"\n        icon-position="left"\n        show-text-label\n        show-tooltip\n        align-horizontal="','"\n      ></hax-tray-button> ']);return _templateObject9_ba6fbc00af6311ebbe560fe9c4727db1=function _templateObject9_ba6fbc00af6311ebbe560fe9c4727db1(){return e},e}function _templateObject8_ba6fbc00af6311ebbe560fe9c4727db1(){var e=_taggedTemplateLiteral([' <hax-tray-button\n        event-name="content-add"\n        icon="add-box"\n        id="content-add"\n        label="','"\n        voice-command="select blocks (menu)"\n        data-simple-tour-stop\n        data-stop-title="label"\n        controls="tray-detail"\n        toggles\n        ?toggled="','"\n        icon-position="left"\n        show-text-label\n        show-tooltip\n        align-horizontal="','"\n      >\n        <div slot="tour" data-stop-content>\n          When you want to add any content to the page from text, to images, to\n          anything more advanced; you can always find items to add under the Add\n          content menu. Click to expand, then either drag and drop items into\n          the page or click and have them placed near whatever you are actively\n          working on.\n        </div>\n      </hax-tray-button>\n      <hax-tray-button\n        event-name="media-add"\n        icon="image:collections"\n        id="media-add"\n        label="','"\n        voice-command="select media (menu)"\n        data-simple-tour-stop\n        data-stop-title="label"\n        controls="tray-detail"\n        toggles\n        ?toggled="','"\n        icon-position="left"\n        show-text-label\n        show-tooltip\n        align-horizontal="','"\n      >\n        <div slot="tour" data-stop-content>\n          Search for media and content anywhere that your copy of HAX has access\n          to. Pick what to search, perform the search and then click or drag the\n          item into the contnet.\n        </div>\n      </hax-tray-button>\n      <hax-tray-button\n        event-name="content-edit"\n        icon="build"\n        id="content-edit"\n        label="','"\n        ?disabled="','"\n        voice-command="(modify)(configure)(edit) selected"\n        data-simple-tour-stop\n        data-stop-title="label"\n        controls="tray-detail"\n        tooltip="'," ",'"\n        toggles\n        ?toggled="','"\n        icon-position="left"\n        show-text-label\n        show-tooltip\n        align-horizontal="','"\n      >\n        <div slot="tour" data-stop-content>\n          When you want to add any content to the page from text, to images, to\n          anything more advanced; you can always find items to add under the Add\n          content menu. Click to expand, then either drag and drop items into\n          the page or click and have them placed near whatever you are actively\n          working on.\n        </div>\n      </hax-tray-button>\n      <hax-tray-button\n        event-name="content-map"\n        icon="icons:toc"\n        id="content-map"\n        label="','"\n        voice-command="select structure (menu)"\n        data-simple-tour-stop\n        data-stop-title="label"\n        controls="tray-detail"\n        toggles\n        ?toggled="','"\n        icon-position="left"\n        show-text-label\n        show-tooltip\n        align-horizontal="','"\n      >\n        <div data-stop-content>\n          This is a simple list of all the block areas of the page that are\n          clickable to jump through items quickly as well as review some simple\n          overview stats.\n        </div>\n      </hax-tray-button>']);return _templateObject8_ba6fbc00af6311ebbe560fe9c4727db1=function _templateObject8_ba6fbc00af6311ebbe560fe9c4727db1(){return e},e}function _templateObject7_ba6fbc00af6311ebbe560fe9c4727db1(){var e=_taggedTemplateLiteral([' <hax-tray-button\n        icon="icons:undo"\n        ?disabled="','"\n        label="','"\n        event-name="undo"\n        voice-command="undo"\n        data-simple-tour-stop\n        data-stop-title="label"\n        icon-position="left"\n        show-text-label\n        show-tooltip\n        align-horizontal="','"\n      >\n        <div slot="tour" data-stop-content>\n          Undo the previous operation in the content, whether typing or adding a\n          widget.\n        </div>\n      </hax-tray-button>\n      <hax-tray-button\n        icon="icons:redo"\n        ?disabled="','"\n        label="','"\n        event-name="redo"\n        voice-command="redo"\n        data-simple-tour-stop\n        data-stop-title="label"\n        icon-position="left"\n        show-text-label\n        show-tooltip\n        align-horizontal="','"\n      >\n        <div slot="tour" data-stop-content>\n          Redo the last action that you hit Undo on.\n        </div>\n      </hax-tray-button>']);return _templateObject7_ba6fbc00af6311ebbe560fe9c4727db1=function _templateObject7_ba6fbc00af6311ebbe560fe9c4727db1(){return e},e}function _templateObject6_ba6fbc00af6311ebbe560fe9c4727db1(){var e=_taggedTemplateLiteral(['\n          <hax-tray-button\n            @click="','"\n            icon="save"\n            icon-position="left"\n            id="haxsavebutton"\n            label="','"\n            event-name="save"\n            voice-command="save page"\n            show-text-label\n            show-tooltip\n            align-horizontal="','"\n          ></hax-tray-button>\n          <hax-toolbar-menu\n            icon="cancel"\n            id="haxcancelbutton"\n            label="','"\n            icon-position="left"\n            show-text-label\n            show-tooltip\n            align-horizontal="','"\n          >\n            <simple-toolbar-menu-item slot="menuitem">\n              <hax-tray-button\n                role="menuitem"\n                danger\n                align-horizontal="left"\n                icon="warning"\n                id="haxcancelbutton"\n                label="','"\n                warning\n                event-name="cancel"\n                voice-command="cancel edit"\n                icon-position="left"\n                show-text-label\n                show-tooltip\n              ></hax-tray-button>\n            </simple-toolbar-menu-item>\n          </hax-toolbar-menu>\n        ']);return _templateObject6_ba6fbc00af6311ebbe560fe9c4727db1=function _templateObject6_ba6fbc00af6311ebbe560fe9c4727db1(){return e},e}function _templateObject5_ba6fbc00af6311ebbe560fe9c4727db1(){var e=_taggedTemplateLiteral(['\n        <hax-tray-button\n          show-text-label\n          show-tooltip\n          align-horizontal="','"\n          id="','"\n          event-name="toggle-element-align"\n          icon="arrow-','"\n          label="','"\n          index="','"\n          tooltip="'," ",'"\n        >\n        </hax-tray-button>\n    </div>\n    ']);return _templateObject5_ba6fbc00af6311ebbe560fe9c4727db1=function _templateObject5_ba6fbc00af6311ebbe560fe9c4727db1(){return e},e}function _templateObject4_ba6fbc00af6311ebbe560fe9c4727db1(){var e=_taggedTemplateLiteral([' <div id="menubar" class="collapse-menu">\n      '," "," ","\n      ",'\n      <slot name="tray-buttons-pre"></slot>\n      ',"\n    </div>"]);return _templateObject4_ba6fbc00af6311ebbe560fe9c4727db1=function _templateObject4_ba6fbc00af6311ebbe560fe9c4727db1(){return e},e}function _templateObject3_ba6fbc00af6311ebbe560fe9c4727db1(){var e=_taggedTemplateLiteral(["","",""]);return _templateObject3_ba6fbc00af6311ebbe560fe9c4727db1=function _templateObject3_ba6fbc00af6311ebbe560fe9c4727db1(){return e},e}function _templateObject2_ba6fbc00af6311ebbe560fe9c4727db1(){var e=_taggedTemplateLiteral(['\n          <hax-tray-button\n            large\n            voice-command="edit page"\n            .data-opened="','"\n            @click="','"\n            icon="create"\n            id="button"\n            feature\n            show-text-label\n            show-tooltip\n            label="','"\n          ></hax-tray-button>\n        ']);return _templateObject2_ba6fbc00af6311ebbe560fe9c4727db1=function _templateObject2_ba6fbc00af6311ebbe560fe9c4727db1(){return e},e}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(n,!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _toConsumableArray(e){return function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function _templateObject_ba6fbc00af6311ebbe560fe9c4727db1(){var e=_taggedTemplateLiteral(["\n      ",'\n      <div class="wrapper">\n        ','\n        <div class="detail">\n          <loading-indicator\n            ?loading="','"\n          ></loading-indicator>\n          ',"\n        </div>\n      </div>\n    "]);return _templateObject_ba6fbc00af6311ebbe560fe9c4727db1=function _templateObject_ba6fbc00af6311ebbe560fe9c4727db1(){return e},e}function _taggedTemplateLiteral(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return _getRequireWildcardCache=function _getRequireWildcardCache(){return e},e}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;if(null===e||"object"!==_typeof(e)&&"function"!=typeof e)return{default:e};var t=_getRequireWildcardCache();if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _get(e,t,n){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var a=function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}(e,t);if(a){var i=Object.getOwnPropertyDescriptor(a,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}require("@lrnwebcomponents/iframe-loader/lib/loading-indicator.js");var l=function(l){function HaxTray(){var e,t;return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,HaxTray),(t=function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}(this,_getPrototypeOf(HaxTray).call(this))).tourName="hax",t.__winEvents={"can-redo-changed":"_redoChanged","can-undo-changed":"_undoChanged","hax-drop-focus-event":"_expandSettingsPanel"},t.t=(_defineProperty(e={structure:"Outline",structureTip:"View Page Structure",editSelected:"Edit selected",edit:"Edit",save:"Save",move:"Move",moveMenu:"Move",menuAlignment:"Menu Alignment",left:"Top Left",right:"Top Right",bottomLeft:"Bottom Left",bottomRight:"Bottom Right",menuPosition:"Menu position",changeSideVisually:"Change which side of the screen the menu is affixed to visually.",expand:"Expand",collapse:"Collapse",menuSize:"Menu size",menuSizeDescription:"Expand or collapse the menu visually.",takeATour:"Help",settings:"Settings",source:"Source",undo:"Undo",redo:"Redo",media:"Media",blocks:"Blocks",cancel:"Cancel",cancelWithoutSaving:"Cancel without saving",configure:"Configure",advanced:"Advanced",layout:"Layout",alignment:"Alignment"},"left","Left"),_defineProperty(e,"center","Center"),_defineProperty(e,"right","Right"),_defineProperty(e,"search","Search"),_defineProperty(e,"templates","Templates"),_defineProperty(e,"width","Width"),e),t.registerLocalization({context:_assertThisInitialized(t),namespace:"hax",updateCallback:"_updateTrayDetail"}),t._initial=!0,t.activeValue={settings:{layout:{__position:"hax-align-left",__scale:100},configure:{},advanced:{}}},t.collapsed=!0,t.activeTab="item-0",t.activeSchema=[],t.canUndo=!1,t.canRedo=!1,t.elementAlign="right",t.trayDetail="content-edit",t.activeTagName="",t.traySizeIcon="hax:arrow-expand-right",t.__setup=!1,setTimeout((function(){Promise.resolve().then((function(){return _interopRequireWildcard(require("./hax-tray-button.js"))})),Promise.resolve().then((function(){return _interopRequireWildcard(require("./hax-toolbar-menu.js"))})),Promise.resolve().then((function(){return _interopRequireWildcard(require("@lrnwebcomponents/simple-toolbar/lib/simple-toolbar-menu-item.js"))})),t.addEventListener("hax-tray-button-click",t._processTrayEvent.bind(_assertThisInitialized(t)))}),0),(0,o.autorun)((function(){t.activeGizmo=(0,o.toJS)(i.HAXStore.activeGizmo)})),(0,o.autorun)((function(){t.activeNode=(0,o.toJS)(i.HAXStore.activeNode)})),(0,o.autorun)((function(){t.tourOpened=(0,o.toJS)(i.HAXStore.tourOpened)})),(0,o.autorun)((function(){t.appStoreLoaded=(0,o.toJS)(i.HAXStore.appStoreLoaded)})),(0,o.autorun)((function(){t.globalPreferences=(0,o.toJS)(i.HAXStore.globalPreferences),t.haxUiTheme=(t.globalPreferences||{}).haxUiTheme||"hax",document.body.setAttribute("hax-ui-theme",t.haxUiTheme)})),(0,o.autorun)((function(){t.editMode=(0,o.toJS)(i.HAXStore.editMode)})),t}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(HaxTray,(0,s.I18NMixin)((0,a.SimpleTourFinder)((0,t.winEventsElement)(e.LitElement)))),_createClass(HaxTray,null,[{key:"tag",get:function get(){return"hax-tray"}}]),_createClass(HaxTray,[{key:"_expandSettingsPanel",value:function _expandSettingsPanel(e){this.shadowRoot.querySelector("#content-edit").click()}},{key:"_redoChanged",value:function _redoChanged(e){this.canRedo=e.detail.value}},{key:"_undoChanged",value:function _undoChanged(e){this.canUndo=e.detail.value}},{key:"render",value:function render(){return(0,e.html)(_templateObject_ba6fbc00af6311ebbe560fe9c4727db1(),this.panelOpsTemplate,this.menuToolbarTemplate,!this.appStoreLoaded,this.trayDetailTemplate)}},{key:"__simpleFieldsClick",value:function __simpleFieldsClick(e){try{this.activeTab=this.shadowRoot.querySelector("#settingsform").shadowRoot.querySelector("simple-fields").activeTab}catch(e){this.activeTab="item-0"}}},{key:"_refreshAddData",value:function _refreshAddData(){this.shadowRoot.querySelector("#gizmobrowser").resetList((0,o.toJS)(i.HAXStore.gizmoList)),this.shadowRoot.querySelector("#staxbrowser").staxList=_toConsumableArray((0,o.toJS)(i.HAXStore.staxList))}},{key:"_processTrayEvent",value:function _processTrayEvent(e){var n=(0,t.normalizeEventPath)(e)[0];switch(e.detail.eventName){case"insert-stax":this.dispatchEvent(new CustomEvent("hax-insert-content-array",{bubbles:!0,cancelable:!0,composed:!0,detail:n.stax}));break;case"insert-tag":var a,o={tag:e.detail.value},r=i.HAXStore.haxSchemaFromTag(e.detail.value);if(n.getAttribute("data-demo-schema")&&r&&r.demoSchema&&r.demoSchema[0])a=r.demoSchema[0];else{var s=JSON.parse(n.getAttribute("event-properties")),l=n.getAttribute("event-content");null==s&&(s={}),null==l&&(l=""),a=i.HAXStore.haxElementPrototype(o,s,l)}this.dispatchEvent(new CustomEvent("hax-insert-content",{bubbles:!0,cancelable:!0,composed:!0,detail:a}));break;case"advanced-settings":this.trayDetail=e.detail.eventName,this.collapsed=!1;break;case"toggle-element-align":var c=["left","right"],d=c[e.detail.index]?c[e.detail.index]:"right";e.detail.index>1&&(this.collapsed=!0),this.style.setProperty("--hax-tray-custom-y",null),this.style.setProperty("--hax-tray-custom-x",null),this.elementAlign=d;break;case"toggle-tray-size":this.collapsed=!this.collapsed;break;case"content-map":case"content-edit":case"content-add":case"media-add":this.trayDetail=e.detail.eventName,this.collapsed=!1;break;case"start-tour":this.startTour();break;case"stop-tour":window.SimpleTourManager.requestAvailability().stopTour("hax");break;case"undo":i.HAXStore.activeHaxBody.undo();break;case"redo":i.HAXStore.activeHaxBody.redo();break;case"cancel":confirm("Changes have not been saved, Click OK to close HAX or Cancel to continue editing.")&&(i.HAXStore.editMode=!1,this.dispatchEvent(new CustomEvent("hax-cancel",{bubbles:!0,composed:!0,cancelable:!1,detail:e.detail})))}}},{key:"startTour",value:function startTour(){this.__tour=this.__tour||window.SimpleTourManager.requestAvailability(),window.addEventListener("tour-changed",this._handleTourChanged.bind(this)),this.__tour.startTour("hax")}},{key:"stopTour",value:function stopTour(){this.__tour=this.__tour||window.SimpleTourManager.requestAvailability(),this.__tour.stopTour("hax"),window.removeEventListener("tour-changed",this._handleTourChanged.bind(this))}},{key:"_handleTourChanged",value:function _handleTourChanged(e){this.tourOpened=e.detail.active==this.tourName}},{key:"firstUpdated",value:function firstUpdated(e){var t=this;_get(_getPrototypeOf(HaxTray.prototype),"firstUpdated",this)&&_get(_getPrototypeOf(HaxTray.prototype),"firstUpdated",this).call(this,e),this.__setup||(this.shadowRoot.querySelector("#settingsform").schematizer=n.HaxSchematizer,this.shadowRoot.querySelector("#settingsform").elementizer=n.HaxElementizer,setTimeout((function(){t.shadowRoot.querySelector(".wrapper").style.margin=t.offsetMargin}),1e3),this.__setup=!0,this.shadowRoot.querySelector("#settingsform").addEventListener("click",this.__simpleFieldsClick.bind(this)),this.shadowRoot.querySelector("#settingsform").addEventListener("value-changed",this.__valueChangedEvent.bind(this)),this.dispatchEvent(new CustomEvent("hax-register-core-piece",{bubbles:!0,cancelable:!0,composed:!0,detail:{piece:"haxTray",object:this}})),this.dispatchEvent(new CustomEvent("hax-add-voice-command",{bubbles:!0,composed:!0,cancelable:!1,detail:{command:":name: (collapse)(open)(expand)(toggle) Blocks (menu)",context:this.shadowRoot.querySelector("#content-add"),callback:"click"}})),this.dispatchEvent(new CustomEvent("hax-add-voice-command",{bubbles:!0,composed:!0,cancelable:!1,detail:{command:":name: (collapse)(open)(expand)(toggle) element settings (menu)",context:this.shadowRoot.querySelector("#advanced-settings"),callback:"click"}})),this.dispatchEvent(new CustomEvent("hax-add-voice-command",{bubbles:!0,composed:!0,cancelable:!1,detail:{command:":name: (collapse)(open)(expand)(toggle) search (menu)",context:this.shadowRoot.querySelector("#media-add"),callback:"click"}})))}},{key:"updated",value:function updated(e){var t=this;return regeneratorRuntime.async((function updated$(n){for(;;)switch(n.prev=n.next){case 0:_get(_getPrototypeOf(HaxTray.prototype),"updated",this)&&_get(_getPrototypeOf(HaxTray.prototype),"updated",this).call(this,e),e.forEach((function _callee(e,n){return regeneratorRuntime.async((function _callee$(a){for(;;)switch(a.prev=a.next){case 0:if("editMode"!=n){a.next=5;break}if(!t.editMode){a.next=4;break}return a.next=4,regeneratorRuntime.awrap(i.HAXStore.refreshActiveNodeForm());case 4:t._editModeChanged(t.editMode);case 5:if("offsetMargin"==n&&setTimeout((function(){t.shadowRoot.querySelector(".wrapper").style.margin=t.offsetMargin}),0),"trayDetail"==n&&t._updateTrayDetail(t[n]),"collapsed"==n&&t[n]&&t._editModeChanged(t.editMode),"activeGizmo"==n&&(t.activeGizmo?(t.activeTagName=t.activeGizmo.title,e&&"content-edit"===t.trayDetail||"content-map"===t.trayDetail||(t.trayDetail="content-edit")):(t.activeTagName="",["content-add","content-map"].includes(t.trayDetail)||(t.trayDetail="content-add"))),"activeNode"!=n){a.next=17;break}if(!t.activeNode||!t.activeNode.tagName){a.next=16;break}if(!t.editMode){a.next=14;break}return a.next=14,regeneratorRuntime.awrap(i.HAXStore.refreshActiveNodeForm());case 14:a.next=17;break;case 16:t.activeTagName="";case 17:case"end":return a.stop()}}))}));case 2:case"end":return n.stop()}}),null,this)}},{key:"_dragEnd",value:function _dragEnd(e){var n=(0,t.normalizeEventPath)(e)?(0,t.normalizeEventPath)(e)[0]:void 0;n&&n.close(!0),this.collapsed=!0,this.style.setProperty("--hax-tray-custom-y",e.clientY+"px"),this.style.setProperty("--hax-tray-custom-x",e.clientX+"px"),this.elementAlign="custom"}},{key:"_dragStart",value:function _dragStart(e){e.stopPropagation(),e.stopImmediatePropagation();var n=(0,t.normalizeEventPath)(e)?(0,t.normalizeEventPath)(e)[0]:void 0;this.collapsed=!0,n&&n.close(!0)}},{key:"_setupForm",value:function _setupForm(){var e=this,t=this.activeNode;if(this._initial=!0,this.activeValue={settings:{layout:{__position:"hax-align-left",__scale:100},configure:{},advanced:{}}},this.shadowRoot.querySelector("#settingsform").fields=[],this.shadowRoot.querySelector("#settingsform").value={},t&&t.tagName&&i.HAXStore.elementList[t.tagName.toLowerCase()]){var n=i.HAXStore.elementList[t.tagName.toLowerCase()];for(var a in"undefined"===_typeof(n.gizmo.title)?this.humanName=t.tagName.replace("-"," ").toLowerCase():this.humanName=n.gizmo.title,this.activeHaxElement.properties)n.settings.configure.forEach((function(t){t.property===a&&(e.activeValue.settings.configure[a]=e.activeHaxElement.properties[a]),t.attribute===a&&(e.activeValue.settings.configure[a]=e.activeHaxElement.properties[a]),t.slot===a&&(e.activeValue.settings.configure[a]=e.activeHaxElement.properties[a])})),n.settings.advanced.forEach((function(t){t.property===a&&(e.activeValue.settings.advanced[a]=e.activeHaxElement.properties[a]),t.attribute===a&&(e.activeValue.settings.advanced[a]=e.activeHaxElement.properties[a]),t.slot===a&&(e.activeValue.settings.advanced[a]=e.activeHaxElement.properties[a])}));var o=document.createElement("div");o.innerHTML=this.activeHaxElement.content,o.childNodes.forEach((function(t){1===t.nodeType&&"undefined"!==t.innerHTML&&(n.settings.configure.forEach((function(n){n.slot===t.getAttribute("slot")?e.activeValue.settings.configure[n.slot]=t.innerHTML:""!=n.slot||null!=t.getAttribute("slot")&&"null"!=t.getAttribute("slot")||(e.activeValue.settings.configure[n.slot]=t.innerHTML)})),n.settings.advanced.forEach((function(n){n.slot===t.getAttribute("slot")?e.activeValue.settings.advanced[n.slot]=t.innerHTML:""!=n.slot||null!=t.getAttribute("slot")&&"null"!=t.getAttribute("slot")||(e.activeValue.settings.advanced[n.slot]=t.innerHTML)})))})),""!=t.style.width?this.activeValue.settings.layout.__scale=t.style.width.replace("%",""):this.activeValue.settings.layout.__scale=100,"block"==t.style.display&&"0px auto"==t.style.margin&&"right"==t.style.float?this.activeValue.settings.layout.__position="hax-align-right":"block"==t.style.display&&"0px auto"==t.style.margin?this.activeValue.settings.layout.__position="hax-align-center":this.activeValue.settings.layout.__position="hax-align-left",this.activeHaxElement.properties.__scale=this.activeValue.settings.layout.__scale,this.activeHaxElement.properties.__position=this.activeValue.settings.layout.__position,n.settings.configure.forEach((function(e,t){n.settings.configure[t].attribute&&(n.settings.configure[t].property=n.settings.configure[t].attribute),n.settings.configure[t].slot&&(n.settings.configure[t].property=n.settings.configure[t].slot)})),n.settings.advanced.forEach((function(e,t){n.settings.advanced[t].attribute&&(n.settings.advanced[t].property=n.settings.advanced[t].attribute),n.settings.advanced[t].slot&&(n.settings.advanced[t].property=n.settings.advanced[t].slot)})),n.settings.layout=[],n.canPosition&&n.settings.layout.push({property:"__position",title:this.t.alignment,inputMethod:"select",value:this.activeValue.settings.layout.__position,options:{"hax-align-left":this.t.left,"hax-align-center":this.t.center,"hax-align-right":this.t.right}}),n.canScale&&n.settings.layout.push({property:"__scale",title:this.t.width,inputMethod:"slider",value:this.activeValue.settings.layout.__scale,min:n.canScale.min?n.canScale.min:12.5,max:n.canScale.max?n.canScale.max:100,step:n.canScale.step?n.canScale.step:12.5}),this.activeSchema=[{property:"settings",inputMethod:"tabs",properties:[]}];n.settings.configure.length>0?this.activeSchema[0].properties.push({property:"configure",title:this.t.configure,properties:n.settings.configure}):this.activeSchema[0].properties.push({property:"configure",title:this.t.configure,disabled:!0}),n.settings.layout.length>0?this.activeSchema[0].properties.push({property:"layout",title:this.t.layout,properties:n.settings.layout}):this.activeSchema[0].properties.push({property:"layout",title:this.t.layout,disabled:!0}),n.settings.advanced.length>0?this.activeSchema[0].properties.push({property:"advanced",title:this.t.advanced,properties:n.settings.advanced}):this.activeSchema[0].properties.push({property:"advanced",title:this.t.advanced,disabled:!0}),this.__activePropSchema=n,this.shadowRoot.querySelector("#settingsform").fields=this.activeSchema,this.shadowRoot.querySelector("#settingsform").value=this.activeValue}}},{key:"_toArray",value:function _toArray(e){return null==e?[]:Object.keys(e).map((function(t){return e[t]}))}},{key:"updateMap",value:function updateMap(){this.shadowRoot&&this.shadowRoot.querySelector("hax-map")&&"content-map"==this.trayDetail&&this.shadowRoot.querySelector("hax-map").updateHAXMap()}},{key:"_updateTrayDetail",value:function _updateTrayDetail(e){"content-add"==e?(this.trayLabel=this.t.blocks,this._refreshAddData()):"media-add"==e?this.trayLabel=this.t.media:"content-map"==e?(this.trayLabel=this.t.structure,this.shadowRoot.querySelector("hax-map").updateHAXMap()):"advanced-settings"==e?(this.trayLabel=this.t.settings,this.shadowRoot.querySelector("hax-preferences-dialog").reloadPreferencesForm()):"content-edit"!=e||this.activeTagName&&""!=this.activeTagName&&this.activeNode&&this.activeNode.tagName?e&&""!=e?this.trayLabel=void 0:this.trayDetail="content-edit":this.trayDetail="content-add",this.requestUpdate()}},{key:"__valueChangedEvent",value:function __valueChangedEvent(e){var n,a,o,r,s=this;this.editMode&&e.detail.value&&e.detail.value.settings&&function(){var l=e.detail.value.settings,c=function _loop(e){var c=function _loop2(c){if(n=!1,null==l[e][c]||l[e][c].readOnly)s.activeNode.removeAttribute((0,t.camelCaseToDash)(c));else{if("prefix"===c&&""!=l[e][c])s.activeNode.setAttribute("prefix",l[e][c]),n=!0;else if("innerText"===c)s.activeNode.innerText=l[e][c],n=!0;else if("layout"===e&&"__position"===c)n=!0,s._initial||(clearTimeout(s.__contextValueDebounce),s.__contextValueDebounce=setTimeout((function(){s.dispatchEvent(new CustomEvent("hax-context-item-selected",{bubbles:!0,composed:!0,detail:{eventName:l[e][c],value:l[e][c]}}))}),50));else if("layout"===e&&"__scale"===c)n=!0,s._initial||(clearTimeout(s.__contextSizeDebounce),s.__contextSizeDebounce=setTimeout((function(){s.dispatchEvent(new CustomEvent("hax-context-item-selected",{bubbles:!0,composed:!0,detail:{eventName:"hax-size-change",value:l[e][c]}}))}),50));else if(s.activeNode.hasOwnProperty(c)||s.activeNode.properties&&s.activeNode.properties.hasOwnProperty(c)||null!=l[e][c]&&l[e][c].constructor===Array||null!=l[e][c]&&l[e][c].constructor===Object)try{l[e][c].constructor===Array?s.activeNode[c]=_toConsumableArray(l[e][c]):l[e][c].constructor===Object?s.activeNode[c]=_objectSpread({},l[e][c]):s.activeNode[c]=l[e][c],n=!0}catch(e){console.warn(e),n=!1}else for(a in s.__activePropSchema.settings[e])if(s.__activePropSchema.settings[e][a].slot==c){var d="span";if(s.__activePropSchema.settings[e][a].slotWrapper?d=s.__activePropSchema.settings[e][a].slotWrapper:"code-editor"===s.activeNode.tagName.toLowerCase()&&(d="template"),o=document.createElement(d),s.__activePropSchema.settings[e][a].slotAttributes)for(r in s.__activePropSchema.settings[e][a].slotAttributes)o.setAttribute(r,s.__activePropSchema.settings[e][a].slotAttributes[r]);""!==s.__activePropSchema.settings[e][a].slot&&(o.slot=s.__activePropSchema.settings[e][a].slot),o.innerHTML=l[e][c];var u=o.cloneNode(!0);n=!0,i.HAXStore.isTextElement(s.activeNode)?s.activeNode.innerHTML=o.innerHTML:((0,t.wipeSlot)(s.activeNode,s.__activePropSchema.settings[e][a].slot),s.activeNode.appendChild(u))}if(!n)try{!0===l[e][c]?s.activeNode.setAttribute((0,t.camelCaseToDash)(c),(0,t.camelCaseToDash)(c)):!1===l[e][c]||""===l[e][c]?s.activeNode.removeAttribute((0,t.camelCaseToDash)(c)):s.activeNode.setAttribute((0,t.camelCaseToDash)(c),l[e][c])}catch(t){console.warn(t),console.warn(c,l[e][c])}}};for(var d in l[e])c(d)};for(var d in{advanced:"advanced",configure:"configure",layout:"layout"})c(d)}();setTimeout((function(){s._initial&&(s._initial=!1)}),51)}},{key:"_editModeChanged",value:function _editModeChanged(e){!this.hidePanelOps&&this.shadowRoot&&this.shadowRoot.querySelector("#button")&&(this.shadowRoot.querySelector("#button").icon=e?"save":"create")}},{key:"_clickEditButton",value:function _clickEditButton(e){i.HAXStore.editMode=!0,window.dispatchEvent(new CustomEvent("simple-modal-hide",{bubbles:!0,cancelable:!0,detail:{}}))}},{key:"_clickSaveButton",value:function _clickSaveButton(e){i.HAXStore.editMode=!1,this.dispatchEvent(new CustomEvent("hax-save",{bubbles:!0,cancelable:!0,composed:!0,detail:e.detail})),window.dispatchEvent(new CustomEvent("simple-modal-hide",{bubbles:!0,cancelable:!0,detail:{}}))}},{key:"panelOpsTemplate",get:function get(){return this.hidePanelOps?"":(0,e.html)(_templateObject2_ba6fbc00af6311ebbe560fe9c4727db1(),this.editMode,this._clickEditButton,this.editMode?this.t.save:this.t.edit)}},{key:"toolbarsTemplate",get:function get(){return(0,e.html)(_templateObject3_ba6fbc00af6311ebbe560fe9c4727db1(),this.opsToolbarTemplate,this.trayToolbarTemplate)}},{key:"menuToolbarTemplate",get:function get(){return(0,e.html)(_templateObject4_ba6fbc00af6311ebbe560fe9c4727db1(),this.menuButtons,this.saveButtons,this.doButtons,this.contentButtons,this.moreButtons)}},{key:"menuButtons",get:function get(){return(0,e.html)(_templateObject5_ba6fbc00af6311ebbe560fe9c4727db1(),this.collapsed?"left":"center","left"==this.elementAlign?"right":"left","left"==this.elementAlign?"forward":"back","left"==this.elementAlign?this.t.right:this.t.left,"left"==this.elementAlign?"1":"0",this.t.moveMenu,"left"==this.elementAlign?this.t.right:this.t.left)}},{key:"saveButtons",get:function get(){return this.hidePanelOps?"":(0,e.html)(_templateObject6_ba6fbc00af6311ebbe560fe9c4727db1(),this._clickSaveButton,this.editMode?this.t.save:this.t.edit,this.collapsed?"left":"center",this.t.cancel,this.collapsed?"left":"center",this.t.cancelWithoutSaving)}},{key:"doButtons",get:function get(){return(0,e.html)(_templateObject7_ba6fbc00af6311ebbe560fe9c4727db1(),!this.canUndo,this.t.undo,this.collapsed?"left":"center",!this.canRedo,this.t.redo,this.collapsed?"left":"center")}},{key:"contentButtons",get:function get(){return(0,e.html)(_templateObject8_ba6fbc00af6311ebbe560fe9c4727db1(),this.t.blocks,"content-add"===this.trayDetail,this.collapsed?"left":"center",this.t.media,"media-add"===this.trayDetail,this.collapsed?"left":"center",this.t.edit,!this.activeTagName||""==this.activeTagName||!this.activeNode||!this.activeNode.tagName,this.t.editSelected,this.activeTagName,"content-edit"===this.trayDetail,this.collapsed?"left":"center",this.t.structure,"content-map"===this.trayDetail,this.collapsed?"left":"center")}},{key:"moreButtons",get:function get(){return(0,e.html)(_templateObject9_ba6fbc00af6311ebbe560fe9c4727db1(),this.t.source,this.collapsed?"left":"center",this.hidePreferencesButton,this.t.settings,"advanced-settings"===this.trayDetail,this.collapsed?"left":"center",this.tourOpened?"stop-tour":"start-tour",this.t.takeATour,this.tourOpened,this.collapsed?"left":"center")}},{key:"trayDetailTemplate",get:function get(){return(0,e.html)(_templateObject10_ba6fbc00af6311ebbe560fe9c4727db1(),this.collapsed?"true":"false",this.collapsed?"-1":"0",this.trayDetail,this.trayLabel||"".concat(this.t.editSelected," ").concat(this.activeTagName),this.advancedSettingsTemplate,this.contentMapTemplate,this.contentEditTemplate,this.contentAddTemplate,this.mediaTemplate)}},{key:"advancedSettingsTemplate",get:function get(){return(0,e.html)(_templateObject11_ba6fbc00af6311ebbe560fe9c4727db1(),"advanced-settings"!==this.trayDetail)}},{key:"contentEditTemplate",get:function get(){return(0,e.html)(_templateObject12_ba6fbc00af6311ebbe560fe9c4727db1(),"system"==this.haxUiTheme?"auto":"haxdark"==this.haxUiTheme?"vs-dark":"vs","content-edit"!==this.trayDetail)}},{key:"contentAddTemplate",get:function get(){var t="content-add"!==this.trayDetail;return(0,e.html)(_templateObject13_ba6fbc00af6311ebbe560fe9c4727db1(),t,t,this.t.templates,t)}},{key:"contentMapTemplate",get:function get(){return(0,e.html)(_templateObject14_ba6fbc00af6311ebbe560fe9c4727db1(),"content-map"!==this.trayDetail)}},{key:"mediaTemplate",get:function get(){var t="media-add"!==this.trayDetail;return(0,e.html)(_templateObject15_ba6fbc00af6311ebbe560fe9c4727db1(),t,t,this.t.search,t)}}],[{key:"styles",get:function get(){return[].concat(_toConsumableArray(_get(_getPrototypeOf(HaxTray),"styles",this)||[]),_toConsumableArray(r.HaxTrayDetail),_toConsumableArray(r.HaxComponentStyles),[(0,e.css)(_templateObject16_ba6fbc00af6311ebbe560fe9c4727db1())])}},{key:"properties",get:function get(){return _objectSpread({},_get(_getPrototypeOf(HaxTray),"properties",this),{offsetMargin:{type:String,attribute:"offset-margin"},collapsed:{type:Boolean,reflect:!0},traySizeIcon:{type:String},appStoreLoaded:{type:Boolean},activeValue:{type:Object},activeSchema:{type:Object},elementAlign:{type:String,reflect:!0,attribute:"element-align"},light:{type:Boolean,reflect:!0},canUndo:{type:Boolean,attribute:"can-undo"},canRedo:{type:Boolean,attribute:"can-redo"},haxUiTheme:{type:String},hidePreferencesButton:{type:Boolean,reflect:!0,attribute:"hide-preferences-button"},hidePanelOps:{type:Boolean,reflect:!0,attribute:"hide-panel-ops"},globalPreferences:{type:Object},activeNode:{type:Object},activeTagName:{type:String},activeGizmo:{type:Object},editMode:{type:Boolean,reflect:!0,attribute:"edit-mode"},trayDetail:{type:String},trayLabel:{type:String},tourOpened:{type:String},__tour:{type:Object}})}}]),HaxTray}();exports.HaxTray=l,window.customElements.define(l.tag,l);