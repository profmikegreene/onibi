/**
 * Copyright 2019 Penn State University
 * @license Apache-2.0, see License.md for full text.
 */
import{LitElement as t,html as e,css as i}from"../../../../lit-element/lit-element.js";import{RichTextEditorButtonBehaviors as o}from"./rich-text-editor-button.js";import"../../../simple-picker/simple-picker.js";const RichTextEditorPickerBehaviors=function(t){return class extends(o(t)){static get tag(){return"rich-text-editor-picker"}static get styles(){return[...super.styles,i`
          :host {
            --simple-picker-background-color: var(--simple-toolbar-button-bg);
            --simple-picker-color-active: var(
              --simple-toolbar-button-hover-color
            );
            --simple-picker-background-color-active: var(
              --simple-toolbar-button-hover-bg
            );
            --simple-picker-color-disabled: var(
              --simple-toolbar-button-disabled-color
            );
            --simple-picker-background-color-disabled: var(
              --simple-toolbar-button-disabled-bg
            );
            --simple-picker-border-radius: 0px;
            --simple-picker-border-width: 0px;
            --simple-picker-option-size: calc(
              24px - 2 * var(--simple-picker-sample-padding, 2px)
            );
            --simple-picker-icon-size: 16px;
            --simple-picker-options-border-width: 1px;
          }
          #button {
            margin-top: 0;
            margin-bottom: 0;
          }
        `]}render(){return e`
        <simple-picker
          id="button"
          ?allow-null="${this.allowNull}"
          class="rtebutton ${this.toggled?"toggled":""}"
          ?disabled="${this.disabled}"
          controls="${super.controls}"
          .options="${this.options}"
          @mouseover="${this._pickerFocus}"
          @keydown="${this._pickerFocus}"
          @value-changed="${this._pickerChange}"
          tabindex="0"
          ?title-as-html="${this.titleAsHtml}"
        >
          ${super.labelTemplate}
        </simple-picker>
        ${super.tooltopTemplate}
      `}static get properties(){return{...super.properties,allowNull:{type:Boolean},command:{type:String},icon:{type:String},titleAsHtml:{type:Boolean},value:{type:Object}}}constructor(){super(),this.allowNull=!1,this.command="insertHTML",this.label="Insert link",this.titleAsHtml=!1,this.value=null}firstUpdated(t){super.firstUpdated(t),this._setOptions()}get isToggled(){return!1}_pickerFocus(t){t.preventDefault()}_rangeChanged(){let t=this._getSelection();this.shadowRoot&&(this.tagsArray.includes(t)?this.shadowRoot.querySelector("#button").value=t:this.range&&!this.range.collapsed||(this.shadowRoot.querySelector("#button").value=null)),super._rangeChanged()}_setOptions(){return this.options=this._setPickerOptions()}_setPickerOptions(t=this.options||[]){let e=[],i=Math.sqrt(t.length)<11?Math.ceil(Math.sqrt(t.length)):10;return t.forEach(((t,o)=>{let r=Math.floor(o/i),s=o-r*i;e[r]||(e[r]=[]),e[r][s]=t})),e}_pickerChange(t){let e=this._getSelectionType()||"";this.commandVal=t.detail.value||"",this.range&&e!==this.commandVal&&this.sendCommand()}}};class RichTextEditorPicker extends(RichTextEditorPickerBehaviors(t)){}window.customElements.define(RichTextEditorPicker.tag,RichTextEditorPicker);export{RichTextEditorPicker,RichTextEditorPickerBehaviors};