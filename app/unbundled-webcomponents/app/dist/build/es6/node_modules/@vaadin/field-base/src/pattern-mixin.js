/**
 * @license
 * Copyright (c) 2021 - 2022 Vaadin Ltd.
 * This program is available under Apache License Version 2.0, available at https://vaadin.com/license/
 */
import{timeOut as t}from"../../component-base/src/async.js";import{Debouncer as e}from"../../component-base/src/debounce.js";import{InputConstraintsMixin as n}from"./input-constraints-mixin.js";export const PatternMixin=r=>class PatternMixinClass extends(n(r)){static get properties(){return{pattern:{type:String},preventInvalidInput:{type:Boolean}}}static get delegateAttrs(){return[...super.delegateAttrs,"pattern"]}static get constraints(){return[...super.constraints,"pattern"]}_checkInputValue(){if(this.preventInvalidInput){const n=this.inputElement;if(n&&n.value.length>0&&!this.checkValidity())return n.value=this.value||"",this.setAttribute("input-prevented",""),void(this._inputDebouncer=e.debounce(this._inputDebouncer,t.after(200),(()=>{this.removeAttribute("input-prevented")})))}}_onInput(t){this._checkInputValue(),super._onInput(t)}};