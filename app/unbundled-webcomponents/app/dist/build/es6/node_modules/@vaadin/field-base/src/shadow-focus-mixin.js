/**
 * @license
 * Copyright (c) 2021 - 2022 Vaadin Ltd.
 * This program is available under Apache License Version 2.0, available at https://vaadin.com/license/
 */
import{KeyboardMixin as e}from"../../component-base/src/keyboard-mixin.js";import{DelegateFocusMixin as t}from"./delegate-focus-mixin.js";export const ShadowFocusMixin=s=>class ShadowFocusMixinClass extends(t(e(s))){static get properties(){return{tabindex:{type:Number,value:0}}}_onKeyDown(e){super._onKeyDown(e),!e.defaultPrevented&&9===e.keyCode&&e.shiftKey&&(this._isShiftTabbing=!0,HTMLElement.prototype.focus.apply(this),this._setFocused(!1),setTimeout((()=>this._isShiftTabbing=!1),0))}_shouldSetFocus(e){if(!this.disabled&&this.focusElement){const t=e.composedPath();if(t[0]===this&&!this.contains(e.relatedTarget)&&!this._isShiftTabbing)return this.focusElement.focus(),!0;if(t.includes(this.focusElement))return!0}return!1}_tabindexChanged(e){void 0!==e&&(this.focusElement.tabIndex=e),this.disabled&&e&&(-1!==e&&(this.__lastTabIndex=e),this.tabindex=void 0)}};