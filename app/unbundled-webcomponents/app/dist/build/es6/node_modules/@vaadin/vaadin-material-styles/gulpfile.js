const n=require("gulp"),e=require("gulp-iconfont"),t=require("fs"),o=require("gulp-svgmin"),i=require("gulp-sort");n.task("icons",(async function(){const r="icons/svg/";let a;n.src(r+"*.svg").pipe(o({plugins:[{removeTitle:!0},{removeViewBox:!1},{cleanupNumericValues:{floatPrecision:6}},{convertPathData:{floatPrecision:6}}]})).pipe(n.dest(r)).on("finish",(function(){n.src(r+"*.svg").pipe(i({comparator:function(n,e){return function sortIconFilesNormalized(n,e){return n.replace(/-/g,"~").localeCompare(e.replace(/-/g,"~"),"en-US")}(n.relative,e.relative)}})).pipe(e({fontName:"material-icons",formats:["woff"],fontHeight:2400,descent:400,normalize:!0,timestamp:1})).on("glyphs",(function(n){a=n})).pipe(n.dest(".")).on("finish",(function(){let n=`/**\n * @license\n * Copyright (c) 2017 - 2022 Vaadin Ltd.\n * This program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n */\nimport './version.js';\n\nconst $_documentContainer = document.createElement('template');\n\n$_documentContainer.innerHTML = \`\n  <style>\n    @font-face {\n      font-family: 'material-icons';\n      src: url(data:application/font-woff;charset=utf-8;base64,${t.readFileSync("material-icons.woff").toString("base64")}) format('woff');\n      font-weight: normal;\n      font-style: normal;\n    }\n\n    html {\n`;a.forEach((e=>{const t=e.name.replace(/\s/g,"-").toLowerCase(),o="\\\\"+e.unicode[0].charCodeAt(0).toString(16);n+=`      --material-icons-${t}: "${o}";\n`})),n+="    }\n  </style>\n`;\n\ndocument.head.appendChild($_documentContainer.content);\n",t.writeFile("font-icons.js",n,(function(n){if(n)return console.error(n)}));const e=a.map((n=>n.name));t.writeFile("test/glyphs.json",JSON.stringify(e,null,2),(function(n){if(n)return console.error(n)})),t.unlink("material-icons.woff",(function(n){if(n)return console.error(n)}))}))}))}));