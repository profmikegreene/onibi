/**
 * @license
 * Copyright (c) 2021 - 2022 Vaadin Ltd.
 * This program is available under Apache License Version 2.0, available at https://vaadin.com/license/
 */
import{DirHelper as t}from"./dir-helper.js";const e=[];let i;new MutationObserver((function(){const t=getDocumentDir();e.forEach((e=>{alignDirs(e,t)}))})).observe(document.documentElement,{attributes:!0,attributeFilter:["dir"]});const alignDirs=function(t,e,i=t.getAttribute("dir")){e?t.setAttribute("dir",e):null!=i&&t.removeAttribute("dir")},getDocumentDir=function(){return document.documentElement.getAttribute("dir")};export const DirMixin=r=>class VaadinDirMixin extends r{static get properties(){return{dir:{type:String,value:"",reflectToAttribute:!0}}}static finalize(){super.finalize(),i||(i=t.detectScrollType())}connectedCallback(){super.connectedCallback(),this.hasAttribute("dir")||(this.__subscribe(),alignDirs(this,getDocumentDir(),null))}attributeChangedCallback(t,i,r){if(super.attributeChangedCallback(t,i,r),"dir"!==t)return;const s=getDocumentDir(),n=r===s&&-1===e.indexOf(this),u=!r&&i&&-1===e.indexOf(this),l=r!==s&&i===s;n||u?(this.__subscribe(),alignDirs(this,s,r)):l&&this.__subscribe(!1)}disconnectedCallback(){super.disconnectedCallback(),this.__subscribe(!1),this.removeAttribute("dir")}_valueToNodeAttribute(t,e,i){("dir"!==i||""!==e||t.hasAttribute("dir"))&&super._valueToNodeAttribute(t,e,i)}_attributeToProperty(t,e,i){"dir"!==t||e?super._attributeToProperty(t,e,i):this.dir=""}__subscribe(t=!0){t?-1===e.indexOf(this)&&e.push(this):e.indexOf(this)>-1&&e.splice(e.indexOf(this),1)}__getNormalizedScrollLeft(e){return t.getNormalizedScrollLeft(i,this.getAttribute("dir")||"ltr",e)}__setNormalizedScrollLeft(e,r){return t.setNormalizedScrollLeft(i,this.getAttribute("dir")||"ltr",e,r)}};